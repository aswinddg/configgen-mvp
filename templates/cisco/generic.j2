! Configuraci칩n Modular - Cisco IOS
! Generado autom치ticamente

{# --- WAN CONFIGURATION --- #}
{% if wan_enabled == 'Yes' %}
interface {{ wan_interface }}
{% if wan_type == 'Static' %}
 ip address {{ wan_ip }} {{ wan_mask }}
{% elif wan_type == 'DHCP' %}
 ip address dhcp
{% endif %}
 no shutdown
 description WAN Interface
exit

{% if wan_type == 'Static' %}
! Configurar ruta por defecto
ip route 0.0.0.0 0.0.0.0 {{ gateway }}
{% endif %}

! Configurar DNS
ip name-server {{ dns1 }}
{% endif %}

{# --- LAN CONFIGURATION --- #}
{% if lan_enabled == 'Yes' %}
{% if lan_type == 'VLAN' %}
interface {{ lan_interface }}
 description LAN Interface
 switchport mode access
 switchport access vlan 10
 no shutdown
exit

interface Vlan10
 ip address {{ lan_ip }} {{ lan_mask }}
 {% if wan_enabled == 'Yes' and enable_nat == 'Yes' %}
 ip nat inside
 {% endif %}
 no shutdown
exit
{% elif lan_type == 'Interface' %}
interface {{ nat_inside if nat_inside is defined and nat_inside else lan_interface }}
 description LAN Interface
 ip address {{ lan_ip }} {{ lan_mask }}
 {% if wan_enabled == 'Yes' and enable_nat == 'Yes' %}
 ip nat inside
 {% endif %}
 no shutdown
exit
{% endif %}
{% endif %}

{# --- NAT CONFIGURATION --- #}
{% if wan_enabled == 'Yes' and enable_nat == 'Yes' %}
! Configuraci칩n de NAT
access-list 100 permit ip {{ lan_network }} 0.0.0.255 any

! NAT overload (PAT)
ip nat inside source list 100 interface {{ nat_outside if nat_outside is defined and nat_outside else wan_interface }} overload

! Designar interface NAT outside
interface {{ nat_outside if nat_outside is defined and nat_outside else wan_interface }}
 ip nat outside
exit
{% endif %}

! Configuraci칩n completada
